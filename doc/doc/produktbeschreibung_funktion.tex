\section{Produktbeschreibung und Funktion}
\label{sec:prodbeschr}
Aufgrund der Resultate der Evaluation der Lösungsprinzipien wird beschlossen, 
das Konzept der stationären Abschussvorrichtung (Drehturm) weiter 
auszuarbeiten. 
\begin{figure}[h!]          
	\centering             
	\includegraphics[width=1.0\textwidth]{fig/Gesamt_bg.jpg}    
	\caption{Drehturm}
	\label{fig:bild} 
\end{figure}

\noindent Hierbei handelt es sich um ein nicht fahrbares, autonom arbeitendes Gerät mit 
einer in horizontaler Richtung drehbaren Abschussvorrichtung. Der gesamte Aufbau 
des Abschussmechanismus inklusive Balllager befindet sich auf einer drehbaren 
Plattform, welche auf einem geeigneten Stativ platziert ist. Die Plattform 
wird durch einen Schrittmotor und eine Zahnradübersetzung präzise in Position 
gebracht. Der Abschusswinkel in vertikaler Richtung ist hierbei fixiert. 

\noindent Die Abschussvorrichtung besteht im Wesentlichen aus einem Balllager, einer 
Ballnachführung und einem sich schnell drehenden Rad, welches die Bälle auf 
die gewünschte Abschussgeschwindigkeit beschleunigt. Die Bauweise dieser drei 
Komponenten soll integral erfolgen, wobei das längliche, quaderförmige 
Balllager als Hauptstruktur dient. An diesem sind sowohl das Rad für die 
Ballbeschleunigung als auch die Komponenten der Ballnachführung befestigt.

\subsection{Drehvorrichtung}
Das unterste Element des Gerätes besteht aus einer kleinen, möglichst leichten 
Bodenplatte. An dieser Bodenplatte werden drei Beine (Rohrform) angeschraubt. Mit 
zwei Axial-Kugellagern wird ein grosses Zahnrad (Zähnezahl z1=120) auf der Bodenplatte 
befestigt. Auf dieses wird anschliessend der gesamte Aufbau, bestehend aus 
Turm, Balllagerung und Abschussvorrichtung, montiert. 

\begin{figure}[h!]          
	\centering             
	\includegraphics[width=0.7\textwidth]{fig/Bild_Drehturm.png}    
	\caption{Drehvorrichtung}
	\label{fig:bild} 
\end{figure}

\noindent Um eine genaue Ausrichtung zu gewährleisten, wird das antreibende Zahnrad 
(Zähnezahl z2=25) mit einem Schrittmotor mit 200 Schritten angetrieben 
(Schrittmotor QSH 4218, 
QMot.eu). Bei 200 Schritten ergibt sich eine Genauigkeit von 1.8$^\circ$, mit einer 
Übersetzung von z1/z2=4.8 ergibt das eine Ausrichtgenauigkeit von 0.375$^\circ$. Dies 
bedeutet für eine Distanz von 1900 mm eine seitliche Abweichung von 
$1900 \cdot \tan(0.375^\circ)= $12.5 mm. Somit wird diese Abweichung bei einem 
Korbdurchmessen von 30 cm keine Rolle spielen. Des Weiteren wird mit einem 
geeigneten Treiber für den Schrittmotor sogar noch eine höhere Genauigkeit 
erreicht, da Zwischenschritte eingebaut werden können. Diese sind jedoch vom 
Trägheitsmoment der Konstruktion und vom Drehmoment des Motors abhängig. 

\subsection{Ballbeschleunigung}
Das Rad für die Ballbeschleunigung soll auf der Oberseite des Balllagers 
positioniert sein. Auf der Unterseite wird eine geeignete Platte befestigt, um 
so den benötigten Anpressdruck zu erzeugen. 
\begin{figure}[h!]          
	\centering             
	\includegraphics[width=0.5\textwidth]{fig/Balllager.jpg}    
	\caption{Balllager, Ballbeschleunigung und Ballnachführung}
	\label{fig:Balllager} 
\end{figure}
Das Rad wird mit einem BLDC Motor angetrieben. Dabei handelt es sich um einen 
elektronisch kommutierten Gleichstrommotor. Das Aufbau des Motors ähnelt dabei 
dem einer Synchronmaschine. Da ein Motor mit einer für diese Aufgabe geeignet 
tiefen Drehzahl nicht erhältlich ist, wird dieser selbst gebaut. Dafür werden 
die Motoren aus alten Diskettenlaufwerken ausgebaut und deren Stator separiert. 
Dazu muss die alte Wicklung entfernt werden. Um den magnetischen Querschnitt 
zu erhöhen, werden zwei Statoren aufeinander gelegt. Der Stator wird neu 
bewickelt. Der Rotor wird aus Aluminium CNC gefräst und mit einem 
Rückschlussring aus Stahl versehen. Die Magnete für das Magnetsystem werden 
eingeklebt. 

\subsection{Ballnachführung}
Die Ballnachführung wird durch ein im Inneren des Balllagers verlaufendes Band 
realisiert. Dieses wird durch eine an der Aussenseite des Balllagers 
angebrachten Trommel aufgewickelt und zieht so die einzelnen Bälle in Richtung 
Abschussrad. Durch einen Spalt in der Seitenwand des Balllagers wird das Band 
von der Aussenseite in die Innenseite geführt. Gleichzeitig wird so der 
Abstand des vollständig aufgewickelten Bands zum Beschleunigungsrad begrenzt, 
so dass ein Verklemmen nicht möglich ist.
Die Trommel wird durch einen mit einem Zahnriemen verbundenen Schrittmotor angetrieben.

\subsection{Bilderkennung}
Ziel der Bilderkennung ist es, zu erkennen, wo sich der Korb auf der 
Spielfläche befindet. Das Bild muss so verarbeitet werden, dass in einem 
ersten Schritt der Korb erkannt wird und in einem zweiten Schritt die Position 
errechnet werden kann.
\subsubsection{Hardware}
Bei der Bildverarbeitung ist zu beachten, dass sie sehr rechen- wie auch 
speicherintensiv ist. Um eine Analyse eines Bildes durchzuführen sind diverse 
mathematische Funktionen wie auch farbanalytische Schritte nötig. Je schneller 
die Berechnung ausgeführt werden soll, desto grössere Rechenleistung wird 
benötigt. Deshalb wird entschieden, die Bildverarbeitung auf ein Laptop 
auszulagern. Dieses sollte neben genügend Speicher auch ausreichend 
Rechenleistung zur Verfügung stellen können. Da sämtliche Studierende bereits 
über ein Laptop verfügen, vereinfacht sich die gemeinsame Entwicklung auf 
dem Endgerät.

\subsubsection{Software}
Als Entwicklungssprache für die Bildverarbeitung hat sich die Gruppe, 
basierend auf der Technologierecherche, für Java entschieden. Dies vor allem 
auch, weil sämtliche Elektrotechnik- und Informatikstudierende aufgrund der 
besuchten Module bereits Erfahrungen mit Java sammeln konnten. Doch Java ist 
auch bezüglich der Komptabilität und Schnittstellen mit diversen 
Entwicklungsumgebungen und Sprachen die erste Wahl. Die vorhandenen 
Entwicklungsumgebungen können dank der breiten Community durch die zahlreichen 
Plug-ins fast beliebig erweitert werden.
Die Technologierecherche hat ergeben, dass OpenCV die geeignetste 
Bildverarbeitungsbibliothek ist. Dies unter anderem auch, weil es über eine 
sehr grosse und auch aktive Community verfügt. Ebenfalls aufgrund der grossen 
Beliebtheit von OpenCV werden sehr viele Plattformen unterstützt, was uns bei 
der Wahl unserer Betriebssysteme, Komponenten und Entwicklungsumgebungen kaum 
einschränkt.

\subsection{Signalübertragung}
Die Signalübertragung befasst sich mit der Kommunikation zwischen den 
beteiligten Komponenten. Einerseits wird ein leichtgewichtiges Signal 
benötigt, um den Start und das Ende der Aufgabe zu symbolisieren. Andererseits 
wird auch für die Übermittlung der Befehle an den Roboter ein solches 
eingesetzt werden. Für die Übertragung des Bildes ist allerdings ein 
Übermittlungsstandard nötig, der auf eine grössere Bandbreite zurückgreifen kann.

\begin{figure}[h!]          
	\centering             
	\includegraphics[width=0.5\textwidth]{fig/kommunikationsablauf.jpg}    
	\caption{Kommunikationsablauf}
	
	\label{fig:Kommunikationsablauf}
\end{figure}
\noindent
\subsubsection{Start- und Endsignal}
Das Startsignal wird drahtlos vom Laptop auf den Roboter übertragen. Nachdem 
dieser die Aufgabe ausgeführt hat, sendet er wiederum drahtlos das Endsignal 
an den Laptop. Aufgrund der Technologierecherche wird entschieden, dass 
sich Bluetooth am besten für diese Übertragung eignet. Im Vergleich mit 
Infrarot und USB konnte sich Bluetooth durchsetzen, da es durch entsprechende 
Module sowohl Mikrocontroller als auch reguläre Computer unterstützt. Die 
vorgegebenen Schnittstellen vereinfachen die drahtlose Kommunikation.

\subsubsection{Befehlsübermittlung an Turm}
Für die Übertragung der Befehle an den Turm wird ebenfalls Bluetooth 
verwendet. Nachfolgend ist eine Liste mit möglichen Befehlen zur Steuerung des 
Turms und einer kurzen Beschreibung zu sehen:
\begin{itemize}
		\item \verb?turnRight(Ticks)?  \\
            Dreht den Turm die übergebene Anzahl Ticks nach rechts (negative 
            Ticks ergeben eine Drehung nach links). 
		\item \verb?shoot? \\
            Initiiert den Schuss. 
		\item \verb?fill? \\
            Bringt das Beförderungsband für die Bälle zurück in die 
            Ausgangsposition. 
		\item \verb?resetTower? \\
            Dreht den Turm in die neutrale Position zurück und bringt das 
            Beförderungsband in die Ausgangsposition. 
		\item \verb?statusPosition? \\
            Erfragt die Drehstellung des Turms in Ticks (0 ist bei 
            Endschalter, positive Richtung nach rechts). 
		\item \verb?statusBat? \\
            Erfragt die Akkuspannung (praktisch für Hinweise, ob der Akku 
            geladen werden soll oder nicht). 
		\item \verb?statusShoot? \\
            Erfragt die aktuelle Drehzahl des Rads. 
		\item \verb?statusFeed? \\
            Erfragt, wo die Position der Ballnachführung ist. 
	\end{itemize}
Die Befehle werden als Strings übermittelt.
\subsubsection{Bildübermittlung}
Je höher die Auflösung des vorhandenen Bildes ist, desto genauer kann die 
Position des Korbes vom Laptop bestimmt werden. Je höher die Auflösung, desto 
grösser wird die Bilddatei, die zum Laptop übermittelt werden muss. Am 
naheliegendsten wäre die Verwendung von Bluetooth gewesen. Doch aufgrund von 
ungenügender Bandbreite muss auf einen anderen Übermittlungsstandard 
zurückgegriffen werden. Die Bildübertragung kann unabhängig vom 
Mikrocontroller geschehen. So kann sich dieser alleine auf die Abarbeitung des 
Schiessvorgangs konzentrieren. Das Bild wird separat entweder direkt von einer 
Kamera oder von einem weiteren Mikrocontroller übermittelt. Um diese 
Übermittlung durchzuführen wird WLAN ausgewählt. Dies vor allem, weil WLAN ein 
sehr verbreiteter Standard ist und fast von allen Geräten unterstützt wird. 
Zudem können im Handel WLAN-fähige Kameras für unter 50 CHF erworben werden.
